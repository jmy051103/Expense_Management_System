{% load humanize %}
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>정산서 목록</title>
  <style>
    table{width:100%;border-collapse:collapse;margin:12px 0}
    th,td{border:1px solid #ddd;padding:8px;text-align:left}
    .actions form{display:inline}
    .actions a{margin-right:8px}
  </style>
</head>
<body>
  <h1>정산서 목록</h1>

  <p>
    <a href="{% url 'report_create' %}">+ 새 정산서</a> |
    <a href="{% url 'dashboard' %}">← 데시보드로</a>
  </p>

  {% if reports %}
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>회사</th>
          <th>작성자</th>
          <th>작성일</th>
          <th>합계</th>
          <th>VAT</th>
          <th>총액</th>
          <th>동작</th>
        </tr>
      </thead>
      <tbody>
        {% for r in reports %}
          <tr>
            <td>#{{ r.id }}</td>
            <td>{{ r.company }}</td>
            <td>{{ r.creator.username }}</td>
            <td>{{ r.created_at|date:"Y-m-d H:i" }}</td>
            <td>{{ r.subtotal|intcomma }}</td>
            <td>{{ r.vat_amount|intcomma }}</td>
            <td>{{ r.grand_total|intcomma }}</td>
            <td class="actions">
              <a href="{% url 'report_detail' r.id %}">보기</a>
              <a href="{% url 'report_edit' r.id %}">수정</a>
              {% if can_delete %}
                <form method="post" action="{% url 'report_delete' r.id %}" onsubmit="return confirm('삭제할까요?');">
                  {% csrf_token %}
                  <button type="submit">삭제</button>
                </form>
              {% endif %}
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>계산서가 없습니다. <a href="{% url 'report_create' %}">지금 만들기</a></p>
  {% endif %}
</body>
</html>
